<div class="main" id="main" ng-hide="hidebody">


	<div ng-show="haspermission" allowed="unauthorized" mdlcode="NMR"
		callback-fn="unauthorize(arg1)" id="unauthorized"></div>
	<div allowed="read" mdlcode="NMR">
		<div class="sticky_header" style="height: 94px;">
			<div class="tab_head_sticky">
				<ul class="breadcrumb">
					<li><i class="fa fa-dashboard" style="padding: 0px 8px;"></i> <a href="#/Dashboard">Home</a></li>
					<li><a href="#/Forms">Safety Management</a></li>
					<li><a href="#/NearmissMain">Near Miss Reports - List</a></li>
					<li><b>Near Miss Report</b></li>
				</ul>

				<div class="tab_head"
					style="padding: 0 !important; height: 40px; padding-left: 15px !important; padding-right: 15px !important; padding-top: 3px !important;">
					<div class="pull-left" style="font-size: 21px;">Near Miss
						Report</div>
					<div class="pull-right" style="font-size: 15px; padding-top: 6px;">
						<span ng-if="nmrfid.length > 0"
							style="display: inline-block; border-right: 2px solid #fff; padding-right: 20px;">Ref.Id :
							{{nmrfid}}</span> <span style="display: inline-block; padding-left: 18px;">Form
							No: {{formNo}}</span>
					</div>
				</div>

			</div>
		</div>



		<div class="row">
			<div class="col-xs-12">
				<div class="form_table_wrapper" style="margin-top: 15px !important;">
					<div class="form_table">

						<div class="row">
							<div class="col-sm-12">
								<a type="button" style="margin-left: 10px"
									class="btn-custom pull-right" allowed="write" mdlcode="NMR"
									ng-click="exportexcel()" ng-show="exportDis"> <img
									src="Sidebar/css/button/export_ex.svg" /> <img
									src="Sidebar/css/button/export_ex_h.svg" /></a> <a type="button"
									ng-click="saveAsPDFDocument()" style="margin-left: 10px"
									allowed="write" mdlcode="NMR" ng-show="exportDis"
									class="btn-custom pull-right"><img
									src="Sidebar/css/button/pdf.svg" /> <img
									src="Sidebar/css/button/pdf_h.svg" /></a>
							</div>
						</div>
						<br />

						<div class="workflow_wrapper">
							<div class="workflow_wrapper_title">Vessel Workflow</div>
							<div class="no-workflow" ng-show="shipWorkFlowNotExist"
								class="row" style="padding-left: 15px">Work Flow Not Yet
								Started</div>
							<div ng-show="shipWorkFlowExist"
								class="row workflow_wrapper_content">
								<div class="col-xs-12 col-sm-1">
									<div class="ship-stage pull-right">
										<img src="img/ship-stage.svg" />
									</div>
								</div>
								<div class="col-sm-11">
									<div class="btn-stage-container"
										ng-repeat="wrkflowstatusdetails in wrkflowstatus"
										ng-if="wrkflowstatusdetails.cntrltype=='CNT002'">
										<div class="stage-head">{{wrkflowstatusdetails.stageid}}</div>
										<div class="stage-neck"></div>
										<div class="stage-body">
											<p>{{ wrkflowstatusdetails.username}}</p>
											<p>{{ wrkflowstatusdetails.rankname}}</p>
											<p>{{ wrkflowstatusdetails.upddate | date:setdate }}</p>
											<span class="stage-body-footer">{{wrkflowstatusdetails.formstatusname}}</span>
										</div>
										<div class="stage-tail"></div>
										<div class="dropdown-content dropdown-menu-arrow"
											ng-if="wrkflowstatusdetails.remarks!=null">
											<div class="label label-primary">Remarks</div>
											<div class="dropdown-content-desc">{{wrkflowstatusdetails.remarks}}</div>
											<div class="dropdown-content-footer">{{wrkflowstatusdetails.senddate
												| date:setdate}}</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<fieldset ng-disabled="closeOutDis">
							<div class="row">
								<div class="col-xs-12 col-sm-6">
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Report Date</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="reportDate | date:setdate">
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Vessel Name</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="shipName">
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Company</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="company">
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Vessel Type</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="shipType">
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">IMO No.</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="imono">
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Vessel Position<span
												style="color: red"><span style="color: red">*</span></span></label>
										</div>
										<div class="col-sm-7">
											<select class="form-control" id="shipPosition"
												ng-model="shipPosition" 
												ng-change="hideError('shipPosition')">
												<option ng-repeat="position in shipPositions" 
													value="{{position.shippositioncode}}">{{position.shippositiondesc}}</option>
											</select>
											<div class="text-error">{{shipPosition_error}}</div>
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Name of Reporter</label>
										</div>
										<div class="col-sm-7">
										
										  <select class="form-control" ng-model="reporterCode">
										    <option  ng-repeat="x in reporterCodeArr track by $index" value="{{x.code}}">{{x.name}}</option>
                      </select>
											
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Department<span
												style="color: red"><span style="color: red">*</span></span></label>
										</div>
										<div class="col-sm-7">
											<select class="form-control" ng-model="department" id="department"
												id="department" ng-change="hideError('department')">
												<option ng-repeat="shipDepartment in departments"
													value="{{shipDepartment.depcode}}">{{shipDepartment.depname}}</option>
											</select>
											<div class="text-error">{{department_error}}</div>
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-4">
											<label class="form-control-label">Rank of the
												Reporter</label>
										</div>
										<div class="col-sm-7">
											<input type="text" class="form-control" disabled
												ng-model="reporterRank">
										</div>
									</div>
								</div>
								<!-- Communication part ---------------------------------------------------------------------------------------------------------------------------->
								<div class="col-xs-12 col-sm-offset-1 col-sm-5" allowed="read"
									mdlcode="CMW">
									<div class="card">
										<div
											class="card-header danger-color-dark white-text commbtnbg">
											<label>&nbsp;&nbsp; <i class="fa fa-comments-o fa-2x"
												style="color: white"></i> &nbsp;&nbsp;&nbsp; Communication
												Window
											</label>
										</div>
										<div class="card-block">
											<div class="m-b-6">
												<div class="activity-widget-5" id="communication-window"
													style="height: 348px; overflow-y: scroll;">
													<div class="container"
														style="width: 380px; padding-top: 15px;"
														ng-repeat="chatNearmissdata in chatdata">
														<div class='row'
															ng-if="chatNearmissdata.senderId != loginUser">
															<div class="right-name">
																<span class="emp-name">{{chatNearmissdata.empName}}</span>
																<span class="rank-name">{{chatNearmissdata.rankname}}</span>
															</div>
															<div class='right-msg'>{{chatNearmissdata.message}}</div>
															<div>
																<img class='right-img'
																	src="assets/faces/user-icon-6.png" />
															</div>
															<div class="msg-time">
																<span>{{chatNearmissdata.createdOn 
																| date:setdate}}</span>
																	
															</div>
														</div>
														<div class='row'
															ng-if="chatNearmissdata.senderId == loginUser">
															<div class="left-name">
																<span class="emp-name">{{chatNearmissdata.empName}}</span>
																<span class="rank-name">{{chatNearmissdata.rankname}}</span>
															</div>
															<div class='left-msg'>{{chatNearmissdata.message}}</div>
															<div>
																<img class='left-img' src="assets/faces/user-icon-6.png" />
															</div>
															<div class="msg-time">{{chatNearmissdata.createdOn
																| date:setdate}}</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="input-group"  allowed="write" mdlcode="CMW">
											<div class="form-group  has-feedback">
												<input type="text" class="form-control commbtn"
													id="inputSuccess5" ng-model="msg" ng-enter="updateChat()">
											</div>
											<span class="input-group-btn">
												<button class="btn btn-success" type="button"
													ng-click="updateChat()">Send</button>
											</span>
										</div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-xs-12 col-sm-12">
									<div class="section_header_top"
										style="height: 3px; left: 15px !important;"></div>
									<div class="section_header col-lg-12">Detailed
										Information of the Near Miss</div>
								</div>
							</div>


							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">Rank of the person
										concerned</label>
								</div>
								<div class="col-sm-3">

									<select class="form-control" ng-model="personConcernedRank" id="personConcernedRank"
										ng-change="fetchName(personConcernedRank)">

										<option ng-repeat="rank in personConcernedRanks"
											value="{{rank.rankcode}}">{{rank.rankname}}</option>
									</select>
									<div class="text-error">{{rankofperson_error}}</div>
								</div>
								<div class="col-sm-3">
									<label style="text-align: right;" class="form-control-label">Years
										of experience as a seafarer?<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-3">

									<select class="form-control"
										ng-model="personConcernedExperience"
										id="personConcernedExperience"
										ng-change="hideError('personConcernedExperience')">
										<option value=""></option>
										<option>0 - 1 Year</option>
										<option>1 Year - 3 Years</option>
										<option>3 Years - 5 Years</option>
										<option>5 Years - 10 Years</option>
										<option>10 Years - 20 Years</option>
										<option>>20 Years</option>
									</select>
									<div class="text-error">{{personConcernedExperience_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">Name of the person
										concerned</label>
								</div>
								<div class="col-sm-3">
                  
                    <select class="form-control" ng-model="personConcernedNameCode">
                        <option  ng-repeat="x in personConcernedArr track by $index" value="{{x.code}}">{{x.name}}</option>
                      </select>
                      
                      
								</div>
								<div class="text-error">{{personConcernedName_error}}</div>
								<div class="col-sm-3">
									<label class="form-control-label">How long does he/she
										is in the Rank?<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-3">

									<select class="form-control" ng-model="howLongDoesHeInRank"
										id="howLongDoesHeInRank"
										ng-change="hideError('howLongDoesHeInRank')">
										<option value=""></option>
										<option>0 - 1 Year</option>
										<option>1 Year - 2 Years</option>
										<option>2 Years - 3 Years</option>
										<option>3 Years - 4 Years</option>
										<option>4 Years - 5 Years</option>
										<option>5 Years - 6 Years</option>
										<option>6 Years - 7 Years</option>
										<option>>7 Years</option>
									</select>
									<div class="text-error">{{howLongDoesHeInRank_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">When<span
										style="color: red"><span style="color: red">*</span></span></label>
								</div>
								<div class="col-sm-3">
									<input id="incidentDate" kendo-date-time-picker  ng-disabled="closeOutDis"
										k-rebind="restrictFutureDate" k-options="restrictFutureDate"
									  ng-model="incidentDate" ng-focus="hideError('incidentDate')"
										ng-blur="validateDate('incidentDate','incidentDate','incidentDate_error','incCondtn','datetime')"
										style="width: 100%;" />
									<div class="text-error"  ng-if="incCondtn">{{incidentDate_error}}</div>
								</div>
								<div class="col-sm-3">
									<label style="text-align: left;" class="form-control-label">Category
										of consequence/potential of the damage<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-3">

									<select class="form-control" ng-model="nearMissCategory"
										id="nearMissCategory"
										ng-change="hideError('nearMissCategory')">
										<option ng-repeat="category in nearMissCategories"
											value="{{category.categorycode}}">{{category.categoryname}}</option>
									</select>
									<div class="text-error">{{nearMissCategory_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">Where<span
										style="color: red"><span style="color: red">*</span></span></label>
								</div>
								<div class="col-sm-3">

									<select class="form-control" ng-model="nearMissLocation"
										id="nearMissLocation"
										ng-change="hideError('nearMissLocation')">
										<option ng-repeat="location in nearMissLocations"
											value="{{location.loccode}}">{{location.locname}}</option>
									</select>
									<div class="text-error">{{nearMissLocation_error}}</div>
								</div>
								<div class="col-sm-3">
									<label style="text-align: right;" class="form-control-label">Working/Job
										Contents<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-3">

									<select class="form-control" ng-model="nearMissJobContent"
										id="nearMissJobContent"
										ng-change="hideError('nearMissJobContent')">
										<option ng-repeat="jobContent in nearMissJobContents"
											value="{{jobContent.jobmastercode}}">{{jobContent.jobmasterdesc}}</option>
									</select>
									<div class="text-error">{{nearMissJobContent_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-3">
									<label style="text-align: left;" class="form-control-label">Detail
										Report (Title)<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-9">
									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('detailReport')" id="detailReport"
										style="height: 66px !important;" id="detailReport" rows="2"
										cols="5" ng-model="detailReport"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										detailReport.length}}</div>
									<div class="text-error">{{detailReport_error}}</div>
								</div>
							</div>

							<div class="row">
								<div class="col-xs-12 col-sm-12">
									<div class="section_header_top"
										style="height: 3px; left: 15px !important;"></div>
									<div class="section_header col-lg-12">Outline of the Near
										Miss incident</div>
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-6">
									<label style="text-align: left;" class="form-control-label">What
										happened?<span style="color: red"><span
											style="color: red">*</span></span>
									</label>

									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('whatHappened')"
										style="height: 66px !important;" id="whatHappened" rows="2"
										cols="5" ng-model="whatHappened"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										whatHappened.length}}</div>
									<div class="text-error">{{whatHappened_error}}</div>
								</div>

								<div class="col-sm-6">
									<label style="text-align: left;" class="form-control-label">What
										was being done? Going on? Intended?<span style="color: red"><span
											style="color: red">*</span>
									</label>

									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('goingOn')"
										style="height: 66px !important;" id="goingOn" rows="2"
										cols="5" ng-model="goingOn"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										goingOn.length}}</div>
									<div class="text-error">{{goingOn_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-12">
									<label style="text-align: left;" class="form-control-label">What
										have gone wrong?<span style="color: red"><span
											style="color: red">*</span></span>
									</label>

									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('goneWrong')"
										style="height: 66px !important;" id="goneWrong" rows="2"
										cols="5" ng-model="goneWrong"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										goneWrong.length}}</div>
									<div class="text-error">{{goneWrong_error}}</div>
								</div>
							</div>

							<div class="row">
								<div class="col-xs-12 col-sm-12">
									<div class="section_header_top"
										style="height: 3px; left: 15px !important;"></div>
									<div class="section_header col-lg-12" style="width: 760px">
										Choose only relevant "Risk factor" (Detailed information,
										please refer to the "Guidance <a ng-click="guidanceSheet()">
											<i class="fa fa-question-circle"></i>
										</a> ")*
									</div>
								</div>
							</div>



							<div class="row">
								<div class="col-xs-12 col-sm-6">
									<div class="table-responsive">
										<table
											class="table table-hover table-striped table-bordered matrix_table_1">
											<thead>
												<tr>
													<th>Risk factor</th>
													<th>Consequence</th>
													<th>Probability</th>
													<th>Potential Risk</th>
													<th></th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Health</td>
													<td><select id="fa_he_td1" class="form-control"
														onchange="calculateRisk('fa_he_td1','fa_he_td2','fa_health')"
														ng-model="healthConsequenceShip"
														ng-init="healthConsequenceShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
													</select></td>
													<td><select id="fa_he_td2" class="form-control"
														onchange="calculateRisk('fa_he_td1','fa_he_td2','fa_health')"
														ng-model="healthProbabilityShip"
														ng-init="healthProbabilityShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
															<option>4</option>
													</select></td>
													<td id="fa_health" class="fa_health_ship matrix_na">N/A</td>
													<td style="padding: 19px"><label
														class="c-input c-checkbox lines "> <input
															type="checkbox" ng-click="hideError('Riskfactor')"
															id="healthcheck"> <span
															class="c-indicator c-indicator-success"></span> <span
															class="c-input-text"></span>
													</label></td>
												</tr>
												<tr>
													<td>Safety</td>
													<td><select id="fa_sa_td1" class="form-control"
														onchange="calculateRisk('fa_sa_td1','fa_sa_td2','fa_safety')"
														ng-model="safetyConsequenceShip"
														ng-init="safetyConsequenceShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
													</select></td>
													<td><select id="fa_sa_td2" class="form-control"
														onchange="calculateRisk('fa_sa_td1','fa_sa_td2','fa_safety')"
														ng-model="safetyProbabilityShip"
														ng-init="safetyProbabilityShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
															<option>4</option>
													</select></td>
													<td id="fa_safety" class="fa_safety_ship matrix_na">N/A</td>
													<td style="padding: 19px"><label
														class="c-input c-checkbox lines"> <input
															type="checkbox" ng-click="hideError('Riskfactor')"
															id="safetycheck"> <span
															class="c-indicator c-indicator-success"></span> <span
															class="c-input-text"></span>
													</label></td>
												</tr>
												<tr>
													<td>Environment</td>
													<td><select id="fa_en_td1" class="form-control"
														onchange="calculateRisk('fa_en_td1','fa_en_td2','fa_environment')"
														ng-model="enviromentConsequenceShip"
														ng-init="enviromentConsequenceShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
													</select></td>
													<td><select id="fa_en_td2" class="form-control"
														onchange="calculateRisk('fa_en_td1','fa_en_td2','fa_environment')"
														ng-model="enviromentProbabilityShip"
														ng-init="enviromentProbabilityShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
															<option>4</option>
													</select></td>
													<td id="fa_environment"
														class="fa_environment_ship matrix_na">N/A</td>
													<td style="padding: 19px"><label
														class="c-input c-checkbox lines"> <input
															type="checkbox" ng-click="hideError('Riskfactor')"
															id="environmentcheck"> <span
															class="c-indicator c-indicator-success"></span> <span
															class="c-input-text"></span>
													</label></td>
												</tr>
												<tr>
													<td>Property</td>
													<td><select id="fa_pr_td1" class="form-control"
														onchange="calculateRisk('fa_pr_td1','fa_pr_td2','fa_property')"
														ng-model="propertyConsequenceShip"
														ng-init="propertyConsequenceShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
													</select></td>
													<td><select id="fa_pr_td2" class="form-control"
														onchange="calculateRisk('fa_pr_td1','fa_pr_td2','fa_property')"
														ng-model="propertyProbabilityShip"
														ng-init="propertyProbabilityShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
															<option>4</option>
													</select></td>
													<td id="fa_property" class="fa_property_ship matrix_na">N/A</td>
													<td style="padding: 19px"><label
														class="c-input c-checkbox lines"> <input
															type="checkbox" ng-click="hideError('Riskfactor')"
															id="propertycheck"> <span
															class="c-indicator c-indicator-success"></span> <span
															class="c-input-text"></span>
													</label></td>
												</tr>
												<tr>
													<td>Reputation</td>
													<td><select id="fa_re_td1" class="form-control"
														onchange="calculateRisk('fa_re_td1','fa_re_td2','fa_reputation')"
														ng-model="reputationConsequenceShip"
														ng-init="reputationConsequenceShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
													</select></td>
													<td><select id="fa_re_td2" class="form-control"
														onchange="calculateRisk('fa_re_td1','fa_re_td2','fa_reputation')"
														ng-model="reputationProbabilityShip"
														ng-init="reputationProbabilityShip = '0'">
															<option ng-selected="true" value="0">N/A</option>
															<option>1</option>
															<option>2</option>
															<option>3</option>
															<option>4</option>
													</select></td>
													<td id="fa_reputation" class="fa_reputation_ship matrix_na">N/A</td>
													<td style="padding: 19px"><label
														class="c-input c-checkbox lines"> <input
															type="checkbox" ng-click="hideError('Riskfactor')"
															id="reputationcheck"> <span
															class="c-indicator c-indicator-success"></span> <span
															class="c-input-text"></span>
													</label></td>
												</tr>
										</table>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6">
									<div class="table-responsive">
										<table
											class="table table-hover table-striped table-bordered matrix_table_2"
											cellspacing="0">
											<thead>
												<tr>
													<th colspan="7" style="text-align: center">Probability</th>
												</tr>

											</thead>
											<tbody>
												<tr>
													<td rowspan="5" style="background: #34495e"><span
														class="rotate">Consequence/Impact</span></td>
													<td colspan="2"></td>
													<td>Very Unlikely</td>
													<td>Unlikely</td>
													<td>Likely</td>
													<td>Very Likely</td>
												</tr>
												<tr style="height: 70px !important;">
													<td colspan="2"></td>
													<td>1</td>
													<td>2</td>
													<td>3</td>
													<td>4</td>
												</tr>
												<tr>
													<td>Extreme Harm</td>
													<td style="padding-left: 35px; padding-right: 35px;">3</td>
													<td ng-click="riskfactiornearmiss1()" class="matrix_high">High</td>
													<td ng-click="riskfactiornearmiss2()" class="matrix_v_high">Very&nbsp;High</td>
													<td ng-click="riskfactiornearmiss3()" class="matrix_v_high">Very&nbsp;High</td>
													<td ng-click="riskfactiornearmiss4()" class="matrix_v_high">Very&nbsp;High</td>
												</tr>

												<tr>
													<td>Moderate Harm</td>
													<td>2</td>
													<td ng-click="riskfactiornearmiss5()" class="matrix_v_low">Very
														Low</td>
													<td ng-click="riskfactiornearmiss6()" class="matrix_med">Medium</td>
													<td ng-click="riskfactiornearmiss7()" class="matrix_high">High</td>
													<td ng-click="riskfactiornearmiss8()" class="matrix_v_high">Very
														High</td>
												</tr>
												<tr>
													<td style="padding-left: 20px; padding-right: 20px;">Slight
														Harm</td>
													<td>1</td>
													<td ng-click="riskfactiornearmiss9()" class="matrix_v_low">Very
														Low</td>
													<td ng-click="riskfactiornearmiss10()" class="matrix_v_low">Very
														Low</td>
													<td ng-click="riskfactiornearmiss11()" class="matrix_low">Low</td>
													<td ng-click="riskfactiornearmiss12()" class="matrix_low">Low</td>
												</tr>
										</table>
									</div>
								</div>

							</div>

							<div class="row">
								<div class="col-xs-12 col-sm-12">
									<div class="section_header_top"
										style="height: 3px; left: 15px !important;"></div>
									<div class="section_header col-lg-12">Investigation of
										Near Miss</div>
								</div>
							</div>


							<div class="row">
								<div class="col-xs-12">
									<p class="lead_title">
										What is the problem ? Details of the problem in the category
										selected (Any one)<span style="color: red">*</span>
									</p>
								</div>
							</div>

							<div class="row">
								<div class="col-sm-3">
									<label class="c-input c-checkbox lines"> <input
										type="checkbox" id="envproblemid" ng-checked="envproblemid" 
										onclick="showHideFields('envproblemid','envproblemtxtid')"
										ng-model="envProblem"> <span
										class="c-indicator c-indicator-success"></span> <span
										class="c-input-text"> Environmental </span>
									</label>
									<div class="" id="envproblemtxtid" style="display: none">
										<textarea maxlength="500" class="form-control"
											ng-focus="hideError('Investigate')" rows="4" cols="5"
											ng-model="envProblemDesc"></textarea>
										<div class="char-left">Characters left: {{max500Length -
											envProblemDesc.length}}</div>
											<div class="text-error">{{Investigate_error1}}</div>
									</div>
								</div>

								<div class="col-sm-3">
									<label class="c-input c-checkbox lines"> <input
										type="checkbox" id="proproblemboxid" ng-checked="proproblemboxid"
										onclick="showHideFields('proproblemboxid','proprobletxtid')"
										ng-model="procedureProblem"><span
										class="c-indicator c-indicator-success"></span> <span
										class="c-input-text"> Procedures </span>
									</label>
									<div class="" id="proprobletxtid" style="display: none">
										<textarea class="form-control" maxlength="500"
											ng-focus="hideError('Investigate')" rows="4" cols="5"
											ng-model="procedureProblemDesc"></textarea>
										<div class="char-left">Characters left: {{max500Length -
											procedureProblemDesc.length}}</div>
											<div class="text-error">{{Investigate_error2}}</div>
									</div>
								</div>

								<div class="col-sm-3">
									<label class="c-input c-checkbox lines"> <input
										type="checkbox" id="eqpproblemboxid" ng-checked="eqpproblemboxid"
										onclick="showHideFields('eqpproblemboxid','eqpproblemdivid')"
										ng-model="equipmentProblem"><span
										class="c-indicator c-indicator-success"></span> <span
										class="c-input-text"> Equipment </span>
									</label>
									<div class="" id="eqpproblemdivid" style="display: none">
										<textarea class="form-control" maxlength="500"
											ng-focus="hideError('Investigate')" id="exampleTextarea"
											rows="4" cols="5" ng-model="equipmentProblemDesc"></textarea>
										<div class="char-left">Characters left: {{max500Length -
											equipmentProblemDesc.length}}</div>
											<div class="text-error">{{Investigate_error3}}</div>
									</div>
								</div>


								<div class="col-sm-3">
									<label class="c-input c-checkbox lines"> <input
										type="checkbox" id="psyproblemboxid" ng-checked="psyproblemboxid"
										onclick="showHideFields2('psyproblemboxid','psyproblemdivid');"
										ng-model="psychologicalProblem"><span
										class="c-indicator c-indicator-success"></span> <span
										class="c-input-text"> SR-Psychological </span>
									</label>
									<div class="" id="psyproblemdivid" style="display: none">
										<select kendo-multi-select k-options="Psychological" id="Psychological"
											ng-model="psychologicalProblemDesc"></select>
										<div class="char-left">Select atleast one</div>
										<div class="text-error">{{Investigate_error4}}</div>
										<!--                        <div class="pull-left" style="font-size: .8em;color:#577A3A">Characters left: {{max500Length - psychologicalProblemDesc.length}}</div> -->
									</div>
								</div>

								<div class="text-error">{{Investigate_error}}</div>
							</div>


							<div class="row">
								<div class="col-xs-12">
									<div class="section_header_top"
										style="height: 3px; left: 15px !important;"></div>
									<div class="section_header col-lg-12">Casual Factors</div>
								</div>
							</div>

							<div class="row">
								<div class="col-xs-12">
									<div class="form-group row">
										<div class="col-sm-3">
											<br /> <label class="form-control-label">Intermediate
												cause of Near Miss</label>
										</div>

										<div class="col-sm-4">
											<label class="form-control-label"> Substandard Action
												in - Cause 1<span style="color: red"><span
													style="color: red">*</span></span>
											</label> <select class="form-control"
												ng-change="hideError('nearMissSubstandardAction')"
												ng-model="nearMissSubstandardAction"
												id="nearMissSubstandardAction">
												<option ng-repeat="action in nearMissSubstandardActions"
													value="{{action.causecode}}">{{action.causedesc}}</option>
											</select>
											<div class="text-error">{{nearMissSubstandardAction_error}}</div>
										</div>


										<div class="col-sm-offset-1 col-sm-4">
											<label class="form-control-label">Substandard
												Condition for - Cause 2<span style="color: red"><span
													style="color: red">*</span></span>
											</label> <select class="form-control"
												ng-model="nearMissSubstandardCondition"
												id="nearMissSubstandardCondition"
												ng-change="hideError('nearMissSubstandardCondition')">
												<option
													ng-repeat="condition in nearMissSubstandardConditions"
													value="{{condition.causecode}}">{{condition.causedesc}}</option>
											</select>
											<div class="text-error">{{nearMissSubstandardCondition_error}}</div>
										</div>
									</div>
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">Casual Factor of the
										Near Miss<span style="color: red"><span
											style="color: red">*</span></span>
									</label>
								</div>
								<div class="col-sm-9">

									<select class="form-control"
										ng-change="hideError('nearMissCasualFactor')" id="nearMissCasualFactor"
										ng-model="nearMissCasualFactor" id="nearMissCasualFactor">
										<option ng-repeat="casualFactor in nearMissCasualFactors"
											value="{{casualFactor.rootid}}">{{casualFactor.rootcause}}</option>
									</select>
									<div class="text-error">{{nearMissCasualFactor_error}}</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-3">
									<label class="form-control-label">Root Cause<span
										style="color: red"><span style="color: red">*</span></span></label>
								</div>
								<div class="col-sm-9">

									<textarea class="form-control"
										ng-focus="hideError('rootCause')"
										style="height: 66px !important;" id="rootCause" rows="2"
										maxlength="500" cols="5" ng-model="rootCause"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										rootCause.length}}</div>
									<div class="text-error">{{rootCause_error}}</div>
								</div>
							</div>


							<div class="row">
								<div class="col-sm-12">
									<div class="section_header_top"></div>
									<div class="section_header" id="showfields">Lesson
										Learned</div>
								</div>
							</div>

							<div class="form-group row">
								<div class="col-sm-6">
									<label class="form-control-label">This should be done<span
										style="color: red">*</span></label>

									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('lessonLearnt')"
										style="height: 66px !important;" id="lessonLearnt" rows="2"
										cols="5" ng-model="lessonLearnt"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										lessonLearnt.length}}</div>
									<div class="text-error">{{lessonLearnt_error}}</div>
								</div>

								<div class="col-sm-6">
									<label class="form-control-label">Advice from the Dep.
										Head</label>

									<textarea class="form-control" maxlength="500"
										ng-disabled="Advicefromcaption"
										ng-focus="hideError('adviseByDHead')"
										style="height: 66px !important;" id="adviseByDHead" rows="2"
										cols="5" ng-model="adviseByDHead"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										adviseByDHead.length}}</div>
									<!--                    <div class="text-error">{{adviseByDHead_error}}</div> -->
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-12">
									<label class="form-control-label">Advice from the
										Captain</label>
									<textarea class="form-control" maxlength="500"
										ng-disabled="isMaster" ng-focus="hideError('adviseByCaptain')"
										style="height: 66px !important;" id="adviseByCaptain" rows="2"
										cols="5" ng-model="adviseByCaptain"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										adviseByCaptain.length}}</div>
								</div>
							</div>

							<div class="section_hr"></div>

							<div class="form-group row">
								<div class="col-sm-12">
									<label class="form-control-label">Corrective action
										taken by the ship including preventive measures<span
										style="color: red"> <span style="color: red">*</span>
									</label>

									<textarea class="form-control" maxlength="500"
										ng-focus="hideError('correctiveAction')"
										style="height: 66px !important;" id="correctiveAction"
										rows="2" cols="5" ng-model="correctiveAction"></textarea>
									<div class="char-left">Characters left: {{max500Length -
										correctiveAction.length}}</div>
									<div class="text-error">{{correctiveAction_error}}</div>
								</div>
							</div>



							<!--File Attachment Component Start-->
							<div class="row">
								<div class="col-sm-12">
									<div class="section_header_top"></div>
									<div class="section_header" id="showfields">Attachments</div>
									<div style="position: absolute; right: 0; top: 1.5em;"
										ng-show="Actiondatalength!=0">
                 <!--       <label 
											for="file-upload"
											style="cursor: pointer; padding-right: 10px; vertical-align: middle"
											class="fileinput-button" style="border-radius: 0px;">
											<span ng-hide="actionFormHide"
											ng-if="(actionrights == 'SUB' && defaultaction=='Y') || (actionrights == 'APR' && defaultaction=='Y')"><b>Attach</b><i
												style="font-size: 1em; color: #66CD00; font-size: 1.5em; padding-left: .4em; vertical-align: middle; padding-right: 10px;"
												class="fa  fa-plus-circle"> </i></span>
										</label> -->
										
										
					<label ng-hide="actionFormHide" ng-if="(actionrights == 'SUB' && defaultaction=='Y') || (actionrights == 'APR' && defaultaction=='Y')"for="file-upload" class="pull-right" style="cursor: pointer; padding-right: 10px; vertical-align: middle;">
                        <span style="font-size: 18px;"></span><b>Attach</b><i class="fa fa-plus-circle btn-attach"> </i>
                      </label>
										
										 <input multiple type="file"
											file-model="myFile" id="file-upload"/>
                   
									</div>
								
								</div>
							</div>

							<div class="row">
								<div class="col-sm-12">
									<div>

										<div class=" col-lg-12">
											<table>
												<tr ng-repeat="file in myFile track by $index">
													<td style="padding: 6px; border-bottom: 1px solid grey;">{{$index
														+ 1}}</td>
													<td
														style="font-weight: 700; color: #238E68; padding: 6px; border-bottom: 1px solid grey;">{{file._file.name}}</td>
													<td
														style="font-size: .8em; padding: 6px; border-bottom: 1px solid grey;">{{file._file.size}}
														bytes</td>
													<td
														style="font-size: .8em; padding: 3px 6px; border-bottom: 1px solid grey;">
														<i ng-click="removeFile($index)"
														style="cursor: pointer; color: red" class="fa  fa-close"></i>
													</td>
												</tr>
											</table>
										</div>
										<div class=" col-lg-12">
											<a ng-if="myFile.length > 0" class="btn-custom btn-upload"
												ng-click="uploadFile()"> <img
												src="Sidebar/css/button/upload.svg" /> <img
												src="Sidebar/css/button/upload_h.svg" />
											</a>
											  <div class="text-error">{{filemsg_error}}</div>
										</div>
									</div>
								</div>
								<!--File Attachment Component End-->

							</div>

							<div class="row">
								<div class="col-sm-12">
									<div class="table-responsive upload_table">
										<table class="table">
											<thead>
												<tr>
													<th>S.No.</th>
													<th>File Name</th>
													<th>File Size</th>
													<th>Uploaded Date & Time</th>
													<th>Uploaded by</th>
													<th style="width: 10%">Action</th>
													<th>Removed Date & Time</th>
													<th>Removed by</th>
												</tr>
											</thead>
											<tbody>
												<tr ng-if="filesData.length<=0">
													<td colspan="8" class="no_data">No Data Available</td>
												</tr>
												<tr ng-class="{'inactive-file': data.docstatus === 'V'}"
													ng-repeat="data in filesData | orderBy : 'docstatus'">
													<td>{{$index + 1}}</td>
													<td>{{data.filename}}</td>
													<td>{{(data.filesize/fileSizeConversionFactor) |
														number:fileSizeRoundOffFactor}} {{fileSizeUnit}}</td>
													<td>{{data.uploaddate | date :setdate}}</td>
													<td>{{data.uploadusername}}</td>
													<td><a ng-click="previewFile(data.docid)"
														ng-if="data.filetype === 'jpg' || data.filetype === 'png' || data.filetype === 'jpeg'"><i
															class="fa fa-eye"></i></a> <a 
														ng-click="confirmDelete(data.docid)" ng-hide="actionFormHide"
														ng-if="(data.docstatus === 'A') && (actionrights == 'SUB'|| actionrights == 'APR') && defaultaction == 'Y'">
															<i class="fa fa-trash"></i>
													</a> <a href="/nearmiss/downloadDocument/?docId={{data.docid}}"><i
															class="fa fa-download"></i></a></td>
													<td>{{data.removedate | date :setdate}}</td>
													<td>{{data.removeusername}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>

							<br />
							<div class="row">
								<div class="col-sm-12" allowed="write" mdlcode="NMR"
									ng-hide="actionFormHide">

                  <a type="button" class="btn_wrapper pull-right"
                 ng-show="deleteAction" allowed="delete" mdlcode="NMR"
                 ng-click="deleteActionPerformed()">
                 <span>Delete</span>
                 <img src="Sidebar/css/icons/delete.svg" />
                </a>

                  <a type="button"
                    ng-if="reassignrights == 'RSN' && defaultaction=='Y'"
                    class="btn btn-custom pull-right" style="margin-top: -6px"
                    ng-click="reAssignDialogClick('#reAssign')"> <img
                    src="Sidebar/css/button/re-assign.svg" /> <img
                    src="Sidebar/css/button/re-assign_h.svg" /></a> 
								
										
										<a type="button"
										ng-if="actionrights == 'APR' && defaultaction=='Y'"
										class="btn btn-custom pull-right" style="margin-top: -7px;"
										ng-click="sendForm('approve')"><img
										src="Sidebar/css/button/approved.svg" /> <img
										src="Sidebar/css/button/approved_h.svg" /></a> 
										
										  <a type="button"
                    ng-if="actionrights == 'SUB' && defaultaction=='Y'"
                    class="btn btn-custom pull-right" style="margin-top: -6px"
                    ng-click="sendForm('send')"> <img
                    src="Sidebar/css/button/send.svg" /> <img
                    src="Sidebar/css/button/send_h.svg" /></a> 
										
										 
                
										<a type="button"
										ng-if="(actionrights == 'SUB' && defaultaction=='Y') || (actionrights == 'APR' && defaultaction=='Y')"
										class="btn btn-custom pull-right" style="margin-top: -6px"
										ng-click="sendForm('save')"> <img
										src="Sidebar/css/button/save.svg" /> <img
										src="Sidebar/css/button/save_h.svg" /></a>


								</div>
							</div>
							</fieldset>
					</div>

					<!-- office use -->
					<div class="for_office">For Office Use Only</div>

					<div class="form_table" style="margin-top: -20px">

						<div class="workflow_wrapper">
							<div class="workflow_wrapper_title">Office Workflow</div>
							<div class="no-workflow" ng-show="shoreWorkFlowNotExist"
								class="row" style="padding-left: 15px">Work Flow Not Yet
								Started</div>
							<div ng-show="shoreWorkFlowExist"
								class="row workflow_wrapper_content">
								<div class="col-xs-12 col-sm-1">
									<div class="ship-stage pull-right">
										<img src="img/shore-stage.svg" />
									</div>
								</div>
								<div class="col-sm-11">
									<div class="btn-stage-container"
										ng-repeat="wrkflowstatusdetails in wrkflowstatus"
										ng-if="wrkflowstatusdetails.cntrltype=='CNT001'">
										<div class="stage-head">{{wrkflowstatusdetails.stageid}}</div>
										<div class="stage-neck"></div>
										<div class="stage-body">
											<p>{{ wrkflowstatusdetails.username}}</p>
											<p>{{ wrkflowstatusdetails.rankname}}</p>
											<p>{{ wrkflowstatusdetails.upddate | date:setdate }}</p>
											<span class="stage-body-footer">{{wrkflowstatusdetails.formstatusname}}</span>
										</div>
										<div class="stage-tail"></div>
										<div class="dropdown-content dropdown-menu-arrow"
											ng-if="wrkflowstatusdetails.remarks!=null">
											<div class="label label-primary">Remarks</div>
											<div class="dropdown-content-desc">{{wrkflowstatusdetails.remarks}}</div>
											<div class="dropdown-content-footer">{{wrkflowstatusdetails.senddate
												| date:setdate}}</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-xs-12 col-sm-12">
								<div class="section_header_top"
									style="height: 3px; left: 15px !important;"></div>
								<div class="section_header col-lg-12">Risk assessment by
									management company</div>
							</div>
						</div>

						<div class="form-group row">
							<div class="col-sm-6">
								<div class="table-responsive">
									<table
										class="table table-hover table-striped table-bordered matrix_table_1"
										cellspacing="0">
										<thead>
											<tr>
												<th>Risk factor</th>
												<th>Consequence</th>
												<th>Probability</th>
												<th>Potential Risk</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>Health</td>
												<td><select ng-disabled="disableShoreDIV"
													class="form-control" id="ri_he_td1"
													onchange="calculateRisk('ri_he_td1','ri_he_td2','ri_health')"
													ng-model="healthConsequenceShore"
													ng-init="healthConsequenceShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
												</select></td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_he_td2" class="form-control"
													onchange="calculateRisk('ri_he_td1','ri_he_td2','ri_health')"
													ng-model="healthProbabilityShore"
													ng-init="healthProbabilityShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
														<option>4</option>
												</select></td>
												<td id="ri_health" class="ri_health_shore matrix_na">N/A</td>
												<td style="padding: 19px"><label
													class="c-input c-checkbox lines"> <input
														ng-disabled="disableShoreDIV" type="checkbox"
														id="healthcheck1"> <span
														class="c-indicator c-indicator-success"></span> <span
														class="c-input-text"></span>
												</label></td>
											</tr>
											<tr>
												<td>Safety</td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_sa_td1" class="form-control"
													onchange="calculateRisk('ri_sa_td1','ri_sa_td2','ri_safety')"
													ng-model="safetyConsequenceShore"
													ng-init="safetyConsequenceShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
												</select></td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_sa_td2" class="form-control"
													onchange="calculateRisk('ri_sa_td1','ri_sa_td2','ri_safety')"
													ng-model="safetyProbabilityShore"
													ng-init="safetyProbabilityShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
														<option>4</option>
												</select></td>
												<td id="ri_safety" class="ri_safety_shore matrix_na">N/A</td>
												<td style="padding: 19px"><label
													class="c-input c-checkbox lines"> <input
														ng-disabled="disableShoreDIV" type="checkbox"
														id="safetycheck1"> <span
														class="c-indicator c-indicator-success"></span> <span
														class="c-input-text"></span>
												</label></td>
											</tr>
											<tr>
												<td>Environment</td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_en_td1" class="form-control"
													onchange="calculateRisk('ri_en_td1','ri_en_td2','ri_environment')"
													ng-model="enviromentConsequenceShore"
													ng-init="enviromentConsequenceShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
												</select></td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_en_td2" class="form-control"
													onchange="calculateRisk('ri_en_td1','ri_en_td2','ri_environment')"
													ng-model="enviromentProbabilityShore"
													ng-init="enviromentProbabilityShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
														<option>4</option>
												</select></td>
												<td id="ri_environment"
													class="ri_environment_shore matrix_na">N/A</td>
												<td style="padding: 19px"><label
													class="c-input c-checkbox lines"> <input
														ng-disabled="disableShoreDIV" type="checkbox"
														id="environmentcheck1"> <span
														class="c-indicator c-indicator-success"></span> <span
														class="c-input-text"></span>
												</label></td>
											</tr>
											<tr>
												<td>Property</td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_pr_td1" class="form-control"
													onchange="calculateRisk('ri_pr_td1','ri_pr_td2','ri_property')"
													ng-model="propertyConsequenceShore"
													ng-init="propertyConsequenceShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
												</select></td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_pr_td2" class="form-control"
													onchange="calculateRisk('ri_pr_td1','ri_pr_td2','ri_property')"
													ng-model="propertyProbabilityShore"
													ng-init="propertyProbabilityShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
														<option>4</option>
												</select></td>
												<td id="ri_property" class="ri_property_shore matrix_na">N/A</td>
												<td style="padding: 19px"><label
													class="c-input c-checkbox lines"> <input
														ng-disabled="disableShoreDIV" type="checkbox"
														id="propertycheck1"> <span
														class="c-indicator c-indicator-success"></span> <span
														class="c-input-text"></span>
												</label></td>
											</tr>
											<tr>
												<td>Reputation</td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_re_td1" class="form-control"
													onchange="calculateRisk('ri_re_td1','ri_re_td2','ri_reputation')"
													ng-model="reputationConsequenceShore"
													ng-init="reputationConsequenceShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
												</select></td>
												<td><select ng-disabled="disableShoreDIV"
													id="ri_re_td2" class="form-control"
													onchange="calculateRisk('ri_re_td1','ri_re_td2','ri_reputation')"
													ng-model="reputationProbabilityShore"
													ng-init="reputationProbabilityShore = '0'">
														<option ng-selected="true" value="0">N/A</option>
														<option>1</option>
														<option>2</option>
														<option>3</option>
														<option>4</option>
												</select></td>
												<td id="ri_reputation" class="ri_reputation_shore matrix_na">N/A</td>
												<td style="padding: 19px"><label
													class="c-input c-checkbox lines"> <input
														ng-disabled="disableShoreDIV" type="checkbox"
														id="reputationcheck1"> <span
														class="c-indicator c-indicator-success"></span> <span
														class="c-input-text"></span>
												</label></td>
											</tr>
									</table>
								</div>
							</div>
							<div class="col-sm-6" ng-disabled="disableShoreDIV">
								<div class="table-responsive">
									<table
										class="table table-hover table-striped table-bordered matrix_table_2"
										cellspacing="0" ng-disabled="disableShoreDIV">
										<thead>
											<tr>
												<th colspan="7" style="text-align: center">Probability</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td rowspan="5" style="background: #34495e"><span
													class="rotate">Consequence/Impact</span></td>
												<td colspan="2"></td>
												<td>Very Unlikely</td>
												<td>Unlikely</td>
												<td>Likely</td>
												<td>Very Likely</td>
											</tr>
											<tr style="height: 70px !important;">
												<td colspan="2"></td>
												<td>1</td>
												<td>2</td>
												<td>3</td>
												<td>4</td>
											</tr>
											<tr>
												<td>Extreme Harm</td>
												<td style="padding-left: 35px; padding-right: 35px;">3</td>
												<td class="matrix_high">High</td>
												<td class="matrix_v_high">Very&nbsp;High</td>
												<td class="matrix_v_high">Very&nbsp;High</td>
												<td class="matrix_v_high">Very&nbsp;High</td>
											</tr>

											<tr>
												<td>Moderate Harm</td>
												<td>2</td>
												<td class="matrix_v_low">Very Low</td>
												<td class="matrix_med">Medium</td>
												<td class="matrix_high">High</td>
												<td class="matrix_v_high">Very High</td>
											</tr>
											<tr>
												<td style="padding-left: 20px; padding-right: 20px;">Slight
													Harm</td>
												<td>1</td>
												<td class="matrix_v_low">Very Low</td>
												<td class="matrix_v_low">Very Low</td>
												<td class="matrix_low">Low</td>
												<td class="matrix_low">Low</td>
											</tr>
									</table>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">MSI Comment Preventive
									measure
							</div>
							<div class="col-sm-12">
								<textarea ng-disabled="disableShoreDIV" ng-model="sicomment"
									maxlength="500" class="form-control"
									style="height: 66px !important;" id="exampleTextarea" rows="2"
									cols="5"></textarea>
								<div class="char-left">Characters left: {{max500Length -
									sicomment.length}}</div>
							</div>
						</div>

						<div class="row">
							<div class="col-xs-3 col-sm-1">
								<label class="form-control-label">Escalate</label>
							</div>
							<div class="col-xs-3 col-sm-1">
								<label class="tgl tgl-gray"> <input
									ng-disabled="disableShoreDIV" type="checkbox" id="escalateid"
									ng-model="escalate" /> <span data-on="I" data-off="0"></span>
								</label>
							</div>
						</div>
						<div class="row" ng-show="escalate==true">
							<div class="col-xs-12 col-sm-12">
								<div class="section_header_top"
									style="height: 3px; left: 15px !important;"></div>
								<div class="section_header col-lg-12">Escalate to AGM QSHE</div>
							</div>
						</div>
						<div class="form-group row" id="sharediv" ng-show="escalate==true">
							<div class="col-xs-3  col-sm-1">
								<label class="form-control-label" id="sharelabel">Share<span
									style="color: red">*</span></label>
							</div>
							<div class="col-xs-3  col-sm-2">
								<!-- <a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                <label class="c-input c-checkbox lines"> <input
                  ng-disabled="QsheManager" type="checkbox" id="escalateid"
                  ng-model="isshare"><span
                  class="c-indicator c-indicator-success"></span> <span
                  class="c-input-text"> Share </span>
                </label> -->
								<label class="tgl tgl-gray"> <input
									ng-disabled="QsheManager" type="checkbox" id="escalateid"
									ng-model="isshare" /> <span data-on="I" data-off="0"></span>
								</label>
							</div>
							<div class="col-xs-12 col-sm-3" ng-show="isshare==true">
								<select ng-model="sharecode" ng-change="fleetFunction()"
									ng-disabled="disableFleets" class="form-control">
									<option></option>
									<option ng-repeat="fleetmasterdetail in fleetmaster"
										value="{{fleetmasterdetail.fleetcode}}">{{fleetmasterdetail.fleetname}}</option>
								</select>
							</div>
							<!-- <div class="col-sm-3">
                  <label class="c-input c-checkbox lines"> <input
                    ng-disabled="disableAllFleets" ng-click="allfleetFunction()"
                    ng-model="allShips" type="checkbox"><span
                    class="c-indicator c-indicator-success"></span> <span
                    class="c-input-text"> All Ships </span>
                  </label>
                </div> -->
						</div>
						<div class="form-group row" id="sharediv" ng-show="escalate==true">
							<div class="col-sm-3">
								<label class="form-control-label">Advice from the AGM QSHE<span style="color: red"><span style="color: red">*</span></span>
								</label>
							</div>
							<div class="col-sm-9">
								<textarea class="form-control" maxlength="500"
									ng-model="advisebyqshemanger" style="height: 66px !important;"
									rows="2" cols="5"></textarea>
								<div class="char-left">Characters left: {{max200Length -
									advisebyqshemanger.length}}</div>
								<!--                    <div class="text-error">{{adviseByCaptain_error}}</div> -->
							</div>
						</div>

						<div class="form-group row" id="markid" ng-show="isshare==true">
							<div class="col-sm-offset-3 col-sm-9">
								<label class="c-input c-checkbox lines"> <input
									ng-disabled="disableShoreDIV" ng-model="isMarkedSignificant"
									type="checkbox"><span
									class="c-indicator c-indicator-success"></span> <span
									class="c-input-text"> Mark Significant </span>
								</label>
							</div>
						</div>

					</div>

					<div class="row">
						<div class="col-xs-12">
							<div class="revision_content">
								<b>Revision No :</b> {{actRevno}} | <b>Date: </b>{{reviseddate |
								date :setdate}}
								<span class="pull-right"> <b>S.No :</b>
                  {{srno}}
                </span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div kendo-dialog="previewDialog" k-on-open="dialogVisible = true"
	class="preview-box" k-on-close="dialogVisible = false" k-modal="true">
	<img src="{{imagetest}}" class="preview-img">
</div>


<div kendo-dialog="confirmDeleteDialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="deleteActions" k-modal="true">
	<img src="img/delete-icon.png">
	<p>{{deleteDialogMsg}}</p>
</div>

<div kendo-dialog="duplicateSigdialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="true">
	<img src="img/warning -dialog.png">
	<p>{{duplicateSigDialogMsg}}</p>
</div>

<div kendo-dialog="exceededRowsdialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="true">
	<img src="img/warning -dialog.png">
	<p>{{exceededRowsDialogMsg}}</p>
</div>

<div kendo-dialog="exceededFileSizedialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="true">
	<img src="img/fileuploadError.png" class="file-error"> <img
		src="img/attach.png">
	<p>{{fileSizeExceededDialogMsg}}</p>
</div>

<div kendo-dialog="exceededFileCountDialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="true">
	<img src="img/fileuploadError.png" class="file-error"> <img
		src="img/attach.png">
	<p>{{exceededFileCountDialogMsg}}</p>
</div>


<kendo-custom-dialog ng-if="geterrorstatuscode!=0"
	title="Near Miss Report" name="systemvalidationdialog"
	custom-options="actions" error-type="warning" error-message="dataerror"
	error-status="{{geterrorstatuscode}}"
	detail-error-message="{{detailerrormessages}}"
	showexception="showexception" error-details="errordetails"
	error-code="{{geterrorstatus}}"></kendo-custom-dialog>


<div kendo-dialog="dialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="true">
	<img src="img/warning -dialog.png">
	<p ng-repeat="errors in dataerror">{{errors[0]}}</p>
</div>

<div kendo-dialog="reAssignDialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="reassignActions" k-modal="true">
	<img src="img/reassign_icon.png">
	<p>{{reAssignConf + mdlname + " ?"}}</p>
</div>

<div kendo-dialog="matrixDialog" k-title="'Near Miss Report'"
	k-on-open="dialogVisible = true" k-on-close="dialogVisible = false"
	k-width="300" k-height="150" k-actions="actions" k-modal="false">
	<img src="img/warning -dialog.png">
	<p>Select the Risk Factor
	<p>
</div>

<div class="modal fade" id="reAssign" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Remarks</h4>
			</div>
			<div class="modal-body">
				<textarea ng-model="remarks" maxlength="100"
					ng-focus="hideError('remarksMessage')" ng-trim="false" rows="4"
					cols="68"></textarea>
				<div class="pull-right" style="font-size: .8em; color: #577A3A">Characters
					left: {{max100Length - remarks.length}}</div>
				<div class="text-error ">{{remarksMessage_error}}</div>
			</div>
			<div class="modal-footer">
				<button type="button" ng-click="okAction('#reAssign')"
					class="btn btn-success">OK</button>
				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
			</div>
		</div>
	</div>
</div>